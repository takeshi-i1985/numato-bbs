<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>管理画面</title>
</head>
<body>
  <h1>管理画面</h1>

  <p><a href="/">掲示板へ戻る</a></p>

  <hr>

  <h2>ユーザー一覧</h2>
  <table border="1" cellpadding="5">
    <tr>
      <th>ID</th>
      <th>ユーザー名</th>
      <th>管理者</th>
      <th>作成日時</th>
      <th>操作</th>
    </tr>
    {% for u in users %}
    <tr>
      <td>{{ u["id"] }}</td>
      <td>{{ u["username"] }}</td>
      <td>{{ "○" if u["is_admin"] == 1 else "" }}</td>
      <td>{{ u["created"] }}</td>
    
      <td>
       <!-- ユーザー削除 -->
         <form method="post" action="/admin/delete_user/{{ u['id'] }}" style="display:inline;">
           <button type="submit">削除</button>
        </form>

        <br><br>

         <!-- パスワード初期化（HR番号4桁） -->
          <form method="post" action="/admin/reset_password/{{ u['id'] }}" style="display:inline;">
            HR番号4桁：
            <input name="hrno" maxlength="4" size="4" required>
           <button type="submit">初期化</button>
          </form>
      </td>

    </tr>
    {% endfor %}
  </table>

  <hr>

  <h2>投稿一覧</h2>
  <ul>
    {% for m in messages %}
     	<li>
  	<strong>{{ m["name"] }}</strong>（{{ m["posted"] }}）<br>
  	<small>IP：{{ m["ip"] }}</small><br>
  	{{ m["body"] }}<br>

  	<form method="post" action="/admin/delete_post/{{ m['id'] }}" style="display:inline;">
    	<button type="submit">投稿削除</button>
  	</form>
	</li>

      <hr>
    {% endfor %}
  </ul>

</body>
</html>
